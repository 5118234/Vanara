<html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="../icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="../styles/branding.css" /><link rel="stylesheet" type="text/css" href="../styles/branding-en-US.css" /><script type="text/javascript" src="../scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>CredUI.CredPackAuthenticationBuffer Method </title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="CredPackAuthenticationBuffer method" /><meta name="System.Keywords" content="CredUI.CredPackAuthenticationBuffer method" /><meta name="Microsoft.Help.F1" content="Vanara.PInvoke.CredUI.CredPackAuthenticationBuffer" /><meta name="Microsoft.Help.Id" content="M:Vanara.PInvoke.CredUI.CredPackAuthenticationBuffer(Vanara.PInvoke.CredUI.CredPackFlags,System.IntPtr,System.IntPtr,System.IntPtr,System.Int32@)" /><meta name="Description" content="The CredPackAuthenticationBuffer function converts a string user name and password into an authentication buffer." /><meta name="Microsoft.Help.ContentType" content="Reference" /><meta name="BrandingAware" content="true" /><meta name="container" content="Vanara.PInvoke" /><meta name="file" content="87efc117-dbf4-9c12-ab0e-41947c10f63c" /><meta name="guid" content="87efc117-dbf4-9c12-ab0e-41947c10f63c" /><link rel="stylesheet" type="text/css" href="../styles/branding-Website.css" /><script type="text/javascript" src="../scripts/jquery-1.11.0.min.js"></script><script type="text/javascript" src="../scripts/branding-Website.js"></script><script type="text/javascript" src="../scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Vanara API Documentation<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d22522ce-4106-42b2-81eb-cb37a0f36df8.htm" title="Vanara API Documentation" tocid="roottoc">Vanara API Documentation</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="c0250011-c1b9-bc9a-b501-96a9795f44a5.htm" title="Vanara.PInvoke" tocid="c0250011-c1b9-bc9a-b501-96a9795f44a5">Vanara.PInvoke</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="d445925c-fdc1-230a-be29-e0966d4ee127.htm" title="CredUI Class" tocid="d445925c-fdc1-230a-be29-e0966d4ee127">CredUI Class</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="2d63e544-46ae-cf06-bc7c-d317fc31cb8d.htm" title="CredUI Methods" tocid="2d63e544-46ae-cf06-bc7c-d317fc31cb8d">CredUI Methods</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="87efc117-dbf4-9c12-ab0e-41947c10f63c.htm" title="CredPackAuthenticationBuffer Method " tocid="87efc117-dbf4-9c12-ab0e-41947c10f63c">CredPackAuthenticationBuffer Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="d31b9fdc-1e87-d670-a1e8-01f08ab39228.htm" title="CredUIConfirmCredentials Method " tocid="d31b9fdc-1e87-d670-a1e8-01f08ab39228">CredUIConfirmCredentials Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fab35c9c-fe4d-455a-3102-36b9ec9e1f6e.htm" title="CredUIParseUserName Method " tocid="fab35c9c-fe4d-455a-3102-36b9ec9e1f6e">CredUIParseUserName Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="fa2179eb-ae04-24b5-2c60-6c106dbf2b18.htm" title="CredUIPromptForCredentials Method " tocid="fa2179eb-ae04-24b5-2c60-6c106dbf2b18">CredUIPromptForCredentials Method </a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="f0c3c77b-ae98-a90e-20d4-40a2b14f73a2.htm" title="CredUIPromptForWindowsCredentials Method " tocid="f0c3c77b-ae98-a90e-20d4-40a2b14f73a2">CredUIPromptForWindowsCredentials Method </a></div><div class="toclevel2" data-toclevel="2"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="9f6d6707-9be5-097a-bef1-906d9b5b3983.htm" title="CredUnPackAuthenticationBuffer Method " tocid="9f6d6707-9be5-097a-bef1-906d9b5b3983">CredUnPackAuthenticationBuffer Method </a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="../icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="../icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="../icons/Help.png" /></td><td class="titleColumn"><h1>CredUI<span id="LSTD77A1C3_0"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_0?cpp=::|nu=.");</script>CredPackAuthenticationBuffer Method </h1></td></tr></table><span class="introStyle"></span> <div class="summary">
            The CredPackAuthenticationBuffer function converts a string user name and password into an authentication buffer.
            <p>Beginning with Windows 8 and Windows Server 2012, the CredPackAuthenticationBuffer function converts an identity credential into an authentication buffer, which is a SEC_WINNT_AUTH_IDENTITY_EX2 structure. This buffer can be passed to LsaLogonUser, AcquireCredentialsHandle, or other identity provider interfaces.</p></div><p> </p>
    <strong>Namespace:</strong> 
   <a href="c0250011-c1b9-bc9a-b501-96a9795f44a5.htm">Vanara.PInvoke</a><br />
    <strong>Assembly:</strong>
   Vanara.PInvoke.CredUI (in Vanara.PInvoke.CredUI.dll) Version: 1.0.2<div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />Syntax</span></div><div id="ID1RBSection" class="collapsibleSection"><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID0EBCA_tab1" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EBCA','cs','1','2');return false;">C#</a></div><div id="ID0EBCA_tab2" class="codeSnippetContainerTab"><a href="#" onclick="javascript:ChangeTab('ID0EBCA','vb','2','2');return false;">VB</a></div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID0EBCA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID0EBCA');return false;" title="Copy">Copy</a></div></div><div id="ID0EBCA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="keyword">public</span> <span class="keyword">static</span> <span class="identifier">bool</span> <span class="identifier">CredPackAuthenticationBuffer</span>(
	<span class="identifier">CredUI<span id="LSTD77A1C3_1"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_1?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CredPackFlags</span> <span class="parameter">dwFlags</span>,
	<span class="identifier">IntPtr</span> <span class="parameter">pszUserName</span>,
	<span class="identifier">IntPtr</span> <span class="parameter">pszPassword</span>,
	<span class="identifier">IntPtr</span> <span class="parameter">pPackedCredentials</span>,
	<span class="keyword">ref</span> <span class="identifier">int</span> <span class="parameter">pcbPackedCredentials</span>
)</pre></div><div id="ID0EBCA_code_Div2" class="codeSnippetContainerCode" style="display: none"><pre xml:space="preserve"><span class="keyword">Public</span> <span class="keyword">Shared</span> <span class="keyword">Function</span> <span class="identifier">CredPackAuthenticationBuffer</span> ( 
	<span class="parameter">dwFlags</span> <span class="keyword">As</span> <span class="identifier">CredUI<span id="LSTD77A1C3_2"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_2?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CredPackFlags</span>,
	<span class="parameter">pszUserName</span> <span class="keyword">As</span> <span class="identifier">IntPtr</span>,
	<span class="parameter">pszPassword</span> <span class="keyword">As</span> <span class="identifier">IntPtr</span>,
	<span class="parameter">pPackedCredentials</span> <span class="keyword">As</span> <span class="identifier">IntPtr</span>,
	<span class="keyword">ByRef</span> <span class="parameter">pcbPackedCredentials</span> <span class="keyword">As</span> <span class="identifier">Integer</span>
) <span class="keyword">As</span> <span class="identifier">Boolean</span></pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID0EBCA");</script><h4 class="subHeading">Parameters</h4><dl><dt><span class="parameter">dwFlags</span></dt><dd>Type: <a href="5a538662-b8cc-25f6-83d9-4a564ea940db.htm">Vanara.PInvoke<span id="LSTD77A1C3_3"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_3?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CredUI<span id="LSTD77A1C3_4"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_4?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>CredPackFlags</a><br />Specifies how the credential should be packed.</dd><dt><span class="parameter">pszUserName</span></dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/5he14kz8" target="_blank">System<span id="LSTD77A1C3_5"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_5?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>IntPtr</a><br />A pointer to a null-terminated string that specifies the user name to be converted. For domain users, the string must be in the following format:
            <p>DomainName\UserName</p><p>For online identities, if the credential is a plaintext password, the user name format is ProviderName\UserName. If the credential is a SEC_WINNT_AUTH_IDENTITY_EX2 structure, the user name is an encoded string that is the UserName parameter output of a function call to SspiEncodeAuthIdentityAsStrings.</p><p>For smart card or certificate credentials, the user name is an encoded string that is the output of a function call to CredMarshalCredential with the CertCredential option.</p><p><span class="code">Windows Server 2008 R2, Windows 7, Windows Server 2008 and Windows Vista:</span> Online identities are not supported.</p></dd><dt><span class="parameter">pszPassword</span></dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/5he14kz8" target="_blank">System<span id="LSTD77A1C3_6"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_6?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>IntPtr</a><br />A pointer to a null-terminated string that specifies the password to be converted.
            <p>For SEC_WINNT_AUTH_IDENTITY_EX2 credentials, the password is an encoded string that is in the ppszPackedCredentialsString output of a function call to SspiEncodeAuthIdentityAsStrings.</p><p>For smart card credentials, this is the smart card PIN.</p><p><span class="code">Windows Server 2008 R2, Windows 7, Windows Server 2008 and Windows Vista:</span> Online identities are not supported.</p></dd><dt><span class="parameter">pPackedCredentials</span></dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/5he14kz8" target="_blank">System<span id="LSTD77A1C3_7"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_7?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>IntPtr</a><br />A pointer to an array of bytes that, on output, receives the packed authentication buffer. This parameter can be NULL to receive the required buffer size in the pcbPackedCredentials parameter.</dd><dt><span class="parameter">pcbPackedCredentials</span></dt><dd>Type: <a href="http://msdn2.microsoft.com/en-us/library/td2s409d" target="_blank">System<span id="LSTD77A1C3_8"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_8?cs=.|vb=.|cpp=::|nu=.|fs=.");</script>Int32</a><span id="LSTD77A1C3_9"></span><script type="text/javascript">AddLanguageSpecificTextSet("LSTD77A1C3_9?cpp=%");</script><br />A pointer to a DWORD value that specifies the size, in bytes, of the pPackedCredentials buffer. On output, if the buffer is not of sufficient size, specifies the required size, in bytes, of the pPackedCredentials buffer.</dd></dl><h4 class="subHeading">Return Value</h4>Type: <a href="http://msdn2.microsoft.com/en-us/library/a28wyd50" target="_blank">Boolean</a><br />TRUE if the function succeeds; otherwise, FALSE. For extended error information, call the GetLastError function.</div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="../icons/SectionExpanded.png" />See Also</span></div><div id="ID2RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="d445925c-fdc1-230a-be29-e0966d4ee127.htm">CredUI Class</a></div><div class="seeAlsoStyle"><a href="c0250011-c1b9-bc9a-b501-96a9795f44a5.htm">Vanara.PInvoke Namespace</a></div></div></div></div><div id="pageFooter" class="pageFooter"> </div></body></html>